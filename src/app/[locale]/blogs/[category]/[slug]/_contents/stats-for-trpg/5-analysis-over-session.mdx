import { BlogImage } from '../../_components/BlogImage';
import { BlogLink } from '../../_components/BlogLink';
import { PresentationalExpectResultDistributionChart } from '@/app/[locale]/(app)/expect/_components/ExpectResultDistributionChart';
import { diceExpecter } from '@/app/[locale]/(app)/expect/_components/hooks/expecter';
import { WithCaption } from '@/mdx-components';

# TRPGプレイヤーのための確率統計 <br />【第5回：10%を10回振ったら出る？】

前回: [【第4回：補正値が与える影響】](/blogs/stats-for-trpg/4-practical-calc-second)

第5回は、セッションを通してのダイスの出目を分析していくよ！　「このセッションの出目は良い？悪い？」という疑問に答えちゃう！

<BlogImage src="niko.png" alt="" width={256} height={256} />

## 運が良い、悪いとは？

### 素朴な分析 ー 出目の平均値

TRPGセッション中に「今日は運が良い」「今日は運が悪い」って感じることあるよね！　でもその感覚って実際の確率とどれぐらい合ってるのかな～？

運の良さ・悪さを客観的に分析するために、セッション中の出目を集計してみることにするよ！

例えば新クトゥルフ神話TRPGみたいに1d100をメインに振るシステムで、こんな感じの出目が出たとするよ！

<div className="grid grid-cols-10 max-sm:grid-cols-5 place-items-center text-xl font-semibold my-4">
  {[79, 70, 9, 99, 31, 42, 90, 48, 79, 29, 65, 24, 34, 15, 81, 11, 45, 28, 32, 17].map((num, i) => (
    <span key={i}>{num}</span>
  ))}
</div>

ここでクイズ！　この出目は運が良い？悪い？　どっちでしょーー？

<BlogImage src="hatena.png" alt="" width={256} height={256} />

**答え: 運が良い**

新クトゥルフ神話TRPGは出目が小さい方が有利だよね？　この20回の出目を見てみると、平均値はなんと46.4！　期待値の50.5を下回ってるから、運が良いと判断できるよ！

### さらに高度な分析 ー 正規化

ここでさらにもう1つのセッションの出目を考えてみるよ！　こっちも新クトゥルフ神話TRPGって言う前提で！

<div className="grid grid-cols-10 max-sm:grid-cols-5 place-items-center text-xl font-semibold my-4">
  {[19, 25, 8, 35, 74, 34, 58, 48, 73, 28].map((num, i) => (
    <span key={i}>{num}</span>
  ))}
</div>

これの平均は40.2だけど、これってさっきの出目より運が良いってこと？

でも極端な話、もしセッション中にダイスを1回しか振らなくて、その出目が1だったら平均が1で、その理論だとめちゃめちゃ運が良いってことになっちゃう！？

つまり単に **出目の平均だけでは運の良さは判断できない** ってことだね！

<BlogImage src="mouth.png" alt="" width={256} height={256} />

じゃあどうしたらいいの？と思うよね、ここで登場するのが **正規化** だよ！

細かい議論を抜きにすると、こんな感じの式で正規化できるよ！

<div className="text-center my-4">**正規化されたスコア = (出目の平均 - 期待値) / (標準偏差 / √振った回数)**</div>

ちょっと変な単語とかが出てきて難しいけど、要は「出目の平均が期待値からどれだけ離れているか」を、どれぐらい散らばってるかを考慮して計算するってこと！

式の中の「期待値」と「標準偏差」はダイスの種類によって決まって、1d100なら期待値は50.5、標準偏差は約28.9になるよ！

この数字を当てはめて計算してみると、、、

- 最初の出目： (46.4 - 50.5) / (28.9 / √20) ≈ **-0.64**
- 2つ目の出目： (40.2 - 50.5) / (28.9 / √10) ≈ **-1.13**

つまり、2つ目の出目の方が運が良いって言えるね！　今回は順当に平均が小さい方が運が良かったけど、振った回数によってはこの逆転が起きることもあるよ！

<BlogImage src="smile.png" alt="" width={256} height={256} />

ちなみにこの正規化されたスコアに10をかけて50を足したものを一般に **偏差値** と呼ぶよ！　受験とかでよく聞く言葉だけど、実は分布があればどこでも使えるの！

なんとなく偏差値って0～100の範囲で考えがちだけど、定義上はマイナスの値も取れば、100を超えることもあるよ！　偏差値っていうのはデータの散らばりを考慮した上で、どれだけ平均から離れているかを示す指標なんだ！

## 10%は10回振ったら確実に出る？

なんとなく 1/10 の確率で成功するなら、10回振ったら1回は必ず成功する気がするよね？　実際にどうなのか、計算して確かめてみよう！

- 1回目で成功する確率：**10%**
- 2回目で成功する確率：**9%**
- 3回目で成功する確率：**8.1%**
- 4回目で成功する確率：**約7.3%**
- 5回目で成功する確率：**約6.6%**
- 6回目で成功する確率：**約5.9%**
- 7回目で成功する確率：**約5.3%**
- 8回目で成功する確率：**約4.8%**
- 9回目で成功する確率：**約4.3%**
- 10回目で成功する確率：**約3.9%**
- 11回目で成功する確率：**約3.5%**
- 12回目で成功する確率：**約3.1%**
- 13回目で成功する確率：**約2.8%**
- 14回目で成功する確率：**約2.5%**
- 15回目で成功する確率：**約2.3%**
- ...

ここでいう2回目で成功する、ってのは1回目で失敗して2回目で成功する確率のことだよ！

これは無限に続いていくんだけど、例えば10回目までで成功する確率を計算してみると、約65.1%になるよ！　つまり10%を10回振っても **実は1/3ぐらいは成功しない可能性がある** ってこと！

<BlogImage src="amazed.png" alt="" width={256} height={256} />

これ、結構ビックリじゃない？　10%の確率で成功するなら10回振ったら1回は成功するって思い込みがあるけど、実際にはそんなに簡単じゃないんだ！

ちなみにこれって10%である必要はなくて、**1/Nの確率のものをN回振ったら成功する確率はだいたい63%～64%ぐらい** になるよ！　ガチャとかで役に立つ知識かも？

## セッション中の出目は収束しない！？

よく「確率は収束する」って言うけど、みんな間違った意味で捉えてない？？

これは **大数の法則** って言われてて、確率が収束するのは「無限に振ったとき」なんだよ！　つまりセッション中にたくさんダイスを振ったとしても、必ずしも期待値に近づくわけじゃないんだ！

薄々気づいてるとは思うけど、1回目に振ったダイスと2回目に振ったダイスは全く関係がないよね？　別に1回目に大きい目が出たから2回目は小さい目が出るとか、そういうことはないの！

<BlogImage src="smile.png" alt="" width={256} height={256} />

でもたくさん振れば振るほど平均が期待値に近づいていく傾向にあるのも事実。これを実際の確率で確かめてみよー！

ここで役に立つのが **信頼区間** っていう考え方！　信頼区間を使うと、出目の平均がどのくらいの範囲に収束するかを予測できるの！！

信頼区間はP95とかP99とかで表されて、例えばP95なら95%の確率でその範囲に収まるってこと！　つまり、たくさん振ったときに出目がどれぐらいの範囲に収束するかを示す指標なんだ！

例えば100d6のP95信頼区間は317～383だから、平均に直せば **3.17～3.83** になるね！平均がこんな感じになれば、確率は収束していると言えるのかも、、、？

<WithCaption caption="100d6の分布 (色が濃い部分がP95信頼区間)"><PresentationalExpectResultDistributionChart result={diceExpecter('100d6')} /></WithCaption>

それでもあくまで確率に過ぎないから、外れることも全然あるんだけどねー。

<BlogImage src="chill.png" alt="" width={256} height={256} />

## 次回予告

第6回は **「ツール紹介：ツールを使いこなせ！」** だよ！

- ダイスの期待値をらくらく計算！
- 判定の確率を事前に計算！
- 実際にダイスを振って出目を確認！

TRPG関連の計算では欠かせないツールである **ダイススペック** の使い方を紹介するよ！　ここまでの内容を踏まえて実際にどうやって計算するかを解説するから、ぜひお楽しみに！

良きTRPGライフを！✨

<BlogImage src="smile.png" alt="" width={256} height={256} />

<BlogLink category="stats-for-trpg" slug="6-tool-introduction" />
